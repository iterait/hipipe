<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>hipipe: Introduction</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">hipipe
   &#160;<span id="projectnumber">0.5.1</span>
   </div>
   <div id="projectbrief">C++17 data pipeline with Python bindings.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Introduction </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Preface </h2>
<hr/>
<p><b>HiPipe</b> is a C++ library for efficient data processing. Its main purpose is to simplify and acclelerate data preparation for deep learning models, but it is generic enough to be used in many other areas.</p>
<p><b>HiPipe</b> lets the programmer build intuitive data streams that transform, combine and filter the data that pass through. Those streams are compiled, batched, and asynchronous, therefore maximizing the utilization of the provided hardware.</p>
<p>The complete source code can be downloaded from our official GitHub <a href="https://github.com/iterait/hipipe">repository</a>.</p>
<p><b>This project is under heavy development. The API is continuously changing without regard to backward compatibility.</b></p>
<h2>Quick Start </h2>
<hr/>
<p>Before proceeding, please install <b>HiPipe</b> by following the <a class="el" href="installation.html">installation guide</a>.</p>
<p><b>HiPipe</b> provides many smaller utilities, such as loading <a class="el" href="group___c_s_v.html">CSV files</a> to <a class="el" href="group___dataframe.html">dataframes</a>, <a class="el" href="group___base64.html">base64 decoders</a>, <a class="el" href="group___groups.html">data splitting</a> and <a href="modules.html">much more</a>. However, probably the most useful funcionality of the library is <a class="el" href="group___stream.html">data stream processing</a>.</p>
<p>Before we dive into details, we recommend to get familiar with the concept of C++ ranges and <a href="http://ericniebler.github.io/range-v3/">Range-v3</a> library by Eric Niebler. Ranges will soon become a fundamental part of C++ standard and Range-v3 library is an experimental implementation of the proposal. To sum up the idea, a range can be thought of as a pair of begin/end iterators with potentially infinite distance.</p>
<p>Now, a stream in the context of <b>HiPipe</b> is a range of tuples, where the tuples contain so-called <em>columns</em>. Each column contains a single <em>batch</em> of data of the same type. To demonstrate this concept on an example, let us assume that we have a table of four users and each user consists of two columns: <code>login</code> and <code>age</code>:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">login  </th><th class="markdownTableHeadNone">age   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">marry  </td><td class="markdownTableBodyNone">24   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">ted  </td><td class="markdownTableBodyNone">41   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">anna  </td><td class="markdownTableBodyNone">16   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">josh  </td><td class="markdownTableBodyNone">59   </td></tr>
</table>
<p>A stream made of such data with batch size of two may look as following:</p>
<div class="fragment"><div class="line"><a class="code" href="group___stream.html#gacf90e1f464c32aa14857b51f72e685ee">HIPIPE_DEFINE_COLUMN</a>(login, std::string)  <span class="preprocessor"># helper macro to define a column of strings</span></div><div class="line"><a class="code" href="group___stream.html#gacf90e1f464c32aa14857b51f72e685ee">HIPIPE_DEFINE_COLUMN</a>(age, <span class="keywordtype">int</span>)</div><div class="line"></div><div class="line">std::tuple&lt;login, age&gt; data1 = {{<span class="stringliteral">&quot;marry&quot;</span>, <span class="stringliteral">&quot;ted&quot;</span>}, {24, 41}},</div><div class="line">std::tuple&lt;login, age&gt; data2 = {{<span class="stringliteral">&quot;anna&quot;</span>, <span class="stringliteral">&quot;josh&quot;</span>}, {16, 59}};</div><div class="line">std::vector&lt;std::tuple&lt;login, age&gt;&gt; stream = {data1, data2};</div></div><!-- fragment --><p>Of course, the stream may as well be loaded from a file or a database and may even be infinite. <b>HiPipe</b> provides <a class="el" href="group___stream.html">many tools</a> to manipulate such streams using the pipe "|" operator. The following example demonstrates the main idea of stream pipelining (see the full example in <a href="example_8cpp_source.html">example.cpp</a>):</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>cxs = <a class="code" href="namespacehipipe_1_1stream.html">hipipe::stream</a>;</div><div class="line"><span class="keyword">using</span> cxs::from; <span class="keyword">using</span> cxs::to; <span class="keyword">using</span> cxs::by; <span class="keyword">using</span> cxs::dim;</div><div class="line"></div><div class="line"><a class="code" href="group___stream.html#gacf90e1f464c32aa14857b51f72e685ee">HIPIPE_DEFINE_COLUMN</a>(login, std::string)  <span class="comment">// helper macro to define a column of strings</span></div><div class="line"><a class="code" href="group___stream.html#gacf90e1f464c32aa14857b51f72e685ee">HIPIPE_DEFINE_COLUMN</a>(age, <span class="keywordtype">int</span>)</div><div class="line"></div><div class="line">std::vector&lt;std::string&gt; logins = {<span class="stringliteral">&quot;marry&quot;</span>, <span class="stringliteral">&quot;ted&quot;</span>, <span class="stringliteral">&quot;anna&quot;</span>, <span class="stringliteral">&quot;josh&quot;</span>};</div><div class="line">std::vector&lt;int&gt;           ages = {     24,    41,     16,     59};</div><div class="line"></div><div class="line"><span class="keyword">auto</span> stream = ranges::view::zip(logins, ages)</div><div class="line"></div><div class="line">  <span class="comment">// create a batched stream out of the raw data</span></div><div class="line">  | cxs::create&lt;login, age&gt;(2)</div><div class="line"></div><div class="line">  <span class="comment">// make everyone older by one year</span></div><div class="line">  | <a class="code" href="group___stream.html#ga86eb72187b1b478933826aed7c5b8f52">cxs::transform</a>(from&lt;age&gt;, to&lt;age&gt;, [](<span class="keywordtype">int</span> a) { <span class="keywordflow">return</span> a + 1; })</div><div class="line"></div><div class="line">  <span class="comment">// increase each letter in the logins by one (i.e., a-&gt;b, e-&gt;f ...)</span></div><div class="line">  | <a class="code" href="group___stream.html#ga86eb72187b1b478933826aed7c5b8f52">cxs::transform</a>(from&lt;login&gt;, to&lt;login&gt;, [](<span class="keywordtype">char</span> c) { <span class="keywordflow">return</span> c + 1; }, dim&lt;2&gt;)</div><div class="line"></div><div class="line">  <span class="comment">// increase the ages by the length of the login</span></div><div class="line">  | <a class="code" href="group___stream.html#ga86eb72187b1b478933826aed7c5b8f52">cxs::transform</a>(from&lt;login, age&gt;, to&lt;age&gt;, [](std::string l, <span class="keywordtype">int</span> a) {</div><div class="line">        <span class="keywordflow">return</span> a + l.length();</div><div class="line">    })</div><div class="line"></div><div class="line">  <span class="comment">// probabilistically rename 50% of the people to &quot;buzz&quot;</span></div><div class="line">  | <a class="code" href="group___stream.html#ga86eb72187b1b478933826aed7c5b8f52">cxs::transform</a>(from&lt;login&gt;, to&lt;login&gt;, 0.5, [](std::string) -&gt; std::string {</div><div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&quot;buzz&quot;</span>;</div><div class="line">    })</div><div class="line"></div><div class="line">  <span class="comment">// drop the login column from the stream</span></div><div class="line">  | cxs::drop&lt;login&gt;</div><div class="line"></div><div class="line">  <span class="comment">// introduce the login column back to the stream</span></div><div class="line">  | <a class="code" href="group___stream.html#ga86eb72187b1b478933826aed7c5b8f52">cxs::transform</a>(from&lt;age&gt;, to&lt;login&gt;, [](<span class="keywordtype">int</span> a) {</div><div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&quot;person_&quot;</span> + <a class="code" href="group___string.html#ga6a0a836a966d5badfbda07e1673b0ffd">std::to_string</a>(a) + <span class="stringliteral">&quot;_years_old&quot;</span>;</div><div class="line">    })</div><div class="line"></div><div class="line">  <span class="comment">// filter only people older than 30 years</span></div><div class="line">  | <a class="code" href="group___stream.html#ga173fbf092fa3f20cb14a7bc163658aaa">cxs::filter</a>(from&lt;login, age&gt;, by&lt;age&gt;, [](<span class="keywordtype">int</span> a) { <span class="keywordflow">return</span> a &gt; 30; })</div><div class="line"></div><div class="line">  <span class="comment">// asynchronously buffer the stream during iteration</span></div><div class="line">  | <a class="code" href="group___stream.html#ga68f442565e5fd800815eb0ca931bbeae">cxs::buffer</a>(2);</div><div class="line"></div><div class="line"><span class="comment">// extract the ages from the stream to std::vector</span></div><div class="line">ages = <a class="code" href="group___stream.html#ga953e08640cd203ba8f39bb727e3a1acf">cxs::unpack</a>(stream, from&lt;age&gt;);</div><div class="line">assert((ages == std::vector&lt;int&gt;{45, 64}));</div></div><!-- fragment --><p>For more information, please refer to the <a href="modules.html">modules</a> documentation section and browse the API reference.</p>
<h2>Multidimensional data </h2>
<hr/>
<p>In <b>HiPipe</b>, when we talk about multidimensional data, we are talking about nested ranges. For instance, <code>std::vector&lt;int&gt;</code> is a one dimensional vector and <code>std::vector&lt;std::vector&lt;int&gt;&gt;</code> is a two dimensional vector.</p>
<p>Most of the stream modifiers have a special parameter called <code>dim&lt;N&gt;</code>, that denotes in which dimension should the modifier operate. For instance, consider the <a class="el" href="group___stream.html#ga86eb72187b1b478933826aed7c5b8f52" title="Transform a subset of hipipe columns to a different subset of hipipe columns. ">transform()</a> from our previous example:</p>
<div class="fragment"><div class="line"><a class="code" href="group___stream.html#gacf90e1f464c32aa14857b51f72e685ee">HIPIPE_DEFINE_COLUMN</a>(login, std::string)</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">  <span class="comment">// This transformation is applied in dimension 1 (default), so in the case of the</span></div><div class="line">  <span class="comment">// login column, the transformation function expects std::string.</span></div><div class="line">  | <a class="code" href="group___stream.html#ga86eb72187b1b478933826aed7c5b8f52">cxs::transform</a>(from&lt;login&gt;, to&lt;login&gt;, [](std::string l) { <span class="keywordflow">return</span> l + <span class="stringliteral">&quot;_abc&quot;</span>; })</div><div class="line"></div><div class="line">  <span class="comment">// This transformation is applied in dimension 2, which for std::string means</span></div><div class="line">  <span class="comment">// that it is applied on each letter.</span></div><div class="line">  | <a class="code" href="group___stream.html#ga86eb72187b1b478933826aed7c5b8f52">cxs::transform</a>(from&lt;login&gt;, to&lt;login&gt;, dim&lt;2&gt;, [](<span class="keywordtype">char</span> c) { <span class="keywordflow">return</span> c + 1; })</div><div class="line"></div><div class="line">  <span class="comment">// And this transformation is applied in dimension 0, which denotes that the function</span></div><div class="line">  <span class="comment">// expects the whole batch.</span></div><div class="line">  | <a class="code" href="group___stream.html#ga86eb72187b1b478933826aed7c5b8f52">cxs::transform</a>(from&lt;login&gt;, to&lt;login&gt;, dim&lt;0&gt;, [](std::vector&lt;std::string&gt; login_batch) {</div><div class="line">        login_batch.push_back(<span class="stringliteral">&quot;new_login&quot;</span>);  <span class="comment">// this inserts a new login to the current batch</span></div><div class="line">        <span class="keywordflow">return</span> login_batch;</div><div class="line">    })</div></div><!-- fragment --><p>In <b>HiPipe</b>, there are no constraints on the shape of the columns. Batch sizes can differ batch to batch, as well as the sizes of the data across a single dimension. For instance, it is possible to have a batch of variably long sequences (e.g., a batch of video frames from videos of different length) and stream modifiers, such as <a class="el" href="group___stream.html#ga86eb72187b1b478933826aed7c5b8f52" title="Transform a subset of hipipe columns to a different subset of hipipe columns. ">transform()</a> and <a class="el" href="group___stream.html#ga173fbf092fa3f20cb14a7bc163658aaa" title="Filter stream data. ">filter()</a>, will handle it in any dimension you choose. To define a column containing multidimensional data, the most simple solution is to wrap the data in <code>std::vector</code> (but any reasonable container will suffice):</p>
<div class="fragment"><div class="line">HIPIPE_DEFINE_COLUMN(stock_price_evolution, std::vector&lt;double&gt;)</div></div><!-- fragment --><h2>Python </h2>
<hr/>
<p><b>HiPipe</b> provides a convenient functions to convert and stream data to Python. This part of the documentation is yet to be prepared. Meanwhile, please refer to the <a class="el" href="group___python.html">Python binding API</a> documentation. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
